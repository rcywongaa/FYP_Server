import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JPanel;
import javax.swing.SpringLayout;
import javax.swing.Timer;

/*
 * TODO:
 */
@SuppressWarnings("serial")
public class KeyboardView extends JPanel implements ActionListener{
	private static final int RADIUS = 10;
	private static final int RATIO = 35; //cm to pixel ratio
	private static final int KEYWIDTH = Math.round(2 * Keyboard.MARGIN * RATIO);
	private int width = 10 * KEYWIDTH;
	private int height = 3 * KEYWIDTH;
	private int[] pos = {width / 2, height / 2};
	private Timer timer;
	private static final int[] JPOS = {Math.round(7.5f * KEYWIDTH), Math.round(1 * KEYWIDTH)} ;

	
	public KeyboardView(){
		setSize(new Dimension(width, height));
		setPreferredSize(new Dimension(width, height));
		setBackground(Color.BLACK);
        timer = new Timer(40, this);
        timer.setInitialDelay(5);
        timer.start();	}
	
	public void setPos(float[] pos){
		this.pos[0] = (int) pos[0] * 100;
		this.pos[1] = height - (int) pos[1] * 100;
	}
	
	public void actionPerformed(ActionEvent e){
		repaint();
	}		
	
	public void paintComponent(Graphics g){
		super.paintComponent(g);
		//System.out.println("Paint called!");
		Graphics2D g2d = (Graphics2D) g;
		g2d.setColor(Color.WHITE);
		g2d.fillRect(JPOS[0], JPOS[1], KEYWIDTH, KEYWIDTH);
		g2d.setColor(Color.GRAY);
		g2d.fillOval(pos[0] - RADIUS, pos[1] - RADIUS, 2 * RADIUS, 2 * RADIUS);
	}
	
}
