import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JPanel;
import javax.swing.SpringLayout;
import javax.swing.Timer;

/*
 * TODO:
 */
@SuppressWarnings("serial")
public class KeyboardView extends JPanel implements ActionListener{
	private static final int RADIUS = 15;
	private static final int RATIO = 35; //cm to pixel ratio
	private static final int KEYWIDTH = Math.round(2 * Keyboard.MARGIN * RATIO);
	private int width = 10 * KEYWIDTH;
	private int height = 3 * KEYWIDTH;
	private int x = width / 2;
	private int y = height / 2;
	private Timer timer;
	private static final int[] JPOS = {0, 2 * KEYWIDTH} ;

	
	public KeyboardView(){
		setLayout(new SpringLayout());
		setPreferredSize(new Dimension(width, height));
		setBackground(Color.BLACK);
        timer = new Timer(40, this);
        timer.setInitialDelay(5);
        timer.start();	}
	
	public void setPos(float[] pos){
		x = (int) pos[0] * 100;
		y = height - (int) pos[1] * 100;
	}
	
	public void actionPerformed(ActionEvent e){
		repaint();
	}		
	
	public void paintComponent(Graphics g){
		super.paintComponent(g);
		//System.out.println("Paint called!");
		Graphics2D g2d = (Graphics2D) g;
		g2d.setColor(Color.WHITE);
		g2d.fillRect(JPOS[0], JPOS[1], KEYWIDTH, KEYWIDTH);
		g2d.setColor(Color.GRAY);
		g2d.fillOval(x - RADIUS, y - RADIUS, RADIUS, RADIUS);
	}
	
}
